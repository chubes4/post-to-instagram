{"version":3,"file":"post-editor.js","mappings":"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","sources":["webpack://post-to-instagram/external window [\"wp\",\"plugins\"]","webpack://post-to-instagram/external window [\"wp\",\"editor\"]","webpack://post-to-instagram/external window [\"wp\",\"i18n\"]","webpack://post-to-instagram/external window [\"wp\",\"components\"]","webpack://post-to-instagram/external window [\"wp\",\"element\"]","webpack://post-to-instagram/external window \"ReactJSXRuntime\"","webpack://post-to-instagram/./admin/assets/src/js/components/AuthPanel.js","webpack://post-to-instagram/./admin/assets/src/js/components/CustomImageSelectModal.js","webpack://post-to-instagram/./admin/assets/src/js/components/ReorderableImageList.js","webpack://post-to-instagram/external window [\"wp\",\"notices\"]","webpack://post-to-instagram/./admin/assets/src/js/post-editor.js","webpack://post-to-instagram/./admin/assets/src/js/utils/getPostImageIds.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"plugins\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","import { __ } from '@wordpress/i18n';\nimport { Button, TextControl, Notice } from '@wordpress/components';\nimport { useState, useEffect } from '@wordpress/element';\n\nconst AuthPanel = ({\n    isConfigured,\n    isAuthenticated,\n    authUrl,\n    i18n,\n    isLoading,\n    onAuthStatusChange,\n    showEdit,\n    setShowEdit,\n    savedAppId,\n}) => {\n    const [appId, setAppId] = useState(savedAppId || '');\n    const [appSecret, setAppSecret] = useState('');\n    const [notice, setNotice] = useState(null);\n    const [saving, setSaving] = useState(false);\n    const [loadingAppId, setLoadingAppId] = useState(false);\n\n    // When entering edit mode, pre-fill App ID with savedAppId\n    useEffect(() => {\n        if (showEdit && savedAppId) {\n            setAppId(savedAppId);\n        }\n        if (showEdit) {\n            setAppSecret('');\n            setLoadingAppId(true);\n            wp.apiFetch({ path: 'pti/v1/auth/status', method: 'GET' })\n                .then(data => {\n                    setAppId(data.app_id || '');\n                    setLoadingAppId(false);\n                });\n        }\n    }, [showEdit, savedAppId]);\n\n    const handleSaveCredentials = () => {\n        setSaving(true);\n        setNotice(null);\n        wp.apiFetch({\n            path: 'pti/v1/auth/credentials',\n            method: 'POST',\n            data: {\n                app_id: appId,\n                app_secret: appSecret,\n            },\n        })\n            .then((response) => {\n                setSaving(false);\n                if (response.success) {\n                    setNotice({ status: 'success', message: i18n.creds_saved || 'Credentials saved.' });\n                    setAppId('');\n                    setAppSecret('');\n                    if (setShowEdit) setShowEdit(false);\n                    if (onAuthStatusChange) onAuthStatusChange();\n                } else {\n                    setNotice({ status: 'error', message: response.message || i18n.error_saving_creds || 'Error saving credentials.' });\n                }\n            })\n            .catch((error) => {\n                setSaving(false);\n                setNotice({ status: 'error', message: (error && error.message) || i18n.error_saving_creds || 'Error saving credentials.' });\n            });\n    };\n\n    // Show credentials form if not configured or editing\n    if (!isConfigured || showEdit) {\n        return (\n            <form onSubmit={e => { e.preventDefault(); handleSaveCredentials(); }}>\n                <p>{i18n.not_configured_for_auth || 'App ID and Secret are not configured.'}</p>\n                <TextControl\n                    label={i18n.app_id_label || 'Instagram App ID'}\n                    value={appId}\n                    onChange={setAppId}\n                    disabled={saving || loadingAppId}\n                    __next40pxDefaultSize={true}\n                    __nextHasNoMarginBottom={true}\n                />\n                <TextControl\n                    label={i18n.app_secret_label || 'Instagram App Secret'}\n                    value={appSecret}\n                    onChange={setAppSecret}\n                    type=\"password\"\n                    disabled={saving || loadingAppId}\n                    __next40pxDefaultSize={true}\n                    __nextHasNoMarginBottom={true}\n                />\n                <p style={{ fontSize: 'smaller', color: '#666', marginTop: 0 }}>\n                    {__('For security, the App Secret is never shown. Please re-enter it to update your credentials.', 'post-to-instagram')}\n                </p>\n                <Button\n                    isPrimary\n                    type=\"submit\"\n                    disabled={saving || !appId || !appSecret || loadingAppId}\n                >\n                    {i18n.save_credentials || 'Save Credentials'}\n                </Button>\n                {isConfigured && setShowEdit && (\n                    <Button\n                        isSecondary\n                        onClick={() => { setShowEdit(false); setNotice(null); }}\n                        disabled={saving || loadingAppId}\n                        style={{ marginLeft: 8 }}\n                    >\n                        {__('Cancel', 'post-to-instagram')}\n                    </Button>\n                )}\n                {loadingAppId && <p>{__('Loading App ID...', 'post-to-instagram')}</p>}\n                {notice && (\n                    <Notice status={notice.status} isDismissible={true} onRemove={() => setNotice(null)}>\n                        {notice.message}\n                    </Notice>\n                )}\n            </form>\n        );\n    }\n\n    // If configured and not editing, show Edit API Credentials button (handled by parent now)\n    return null;\n};\n\nexport default AuthPanel; ","import { useState, useEffect } from '@wordpress/element';\nimport { Modal, Button, Card, CardMedia, CardBody, Spinner, Notice } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nconst fetchImagesByIds = async (ids) => {\n    if (!ids.length) return [];\n    const params = ids.map(id => `include[]=${id}`).join('&');\n    const resp = await fetch(`/wp-json/wp/v2/media?per_page=100&${params}`);\n    if (!resp.ok) return [];\n    return await resp.json();\n};\n\nconst CustomImageSelectModal = ({\n    allowedIds = [],\n    selectedImages = [],\n    setSelectedImages,\n    onClose,\n    maxSelect = 10,\n}) => {\n    const [images, setImages] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [selected, setSelected] = useState(selectedImages.map(img => img.id));\n    const [notice, setNotice] = useState(null);\n\n    useEffect(() => {\n        setLoading(true);\n        fetchImagesByIds(allowedIds)\n            .then(data => {\n                setImages(data);\n                setLoading(false);\n            })\n            .catch(() => {\n                setError(__('Failed to load images.', 'post-to-instagram'));\n                setLoading(false);\n            });\n    }, [allowedIds && allowedIds.join(',')]);\n\n    const handleToggle = (id) => {\n        if (selected.includes(id)) {\n            setSelected(selected.filter(sid => sid !== id));\n        } else {\n            if (selected.length >= maxSelect) {\n                setNotice({ status: 'error', message: __('You can select a maximum of 10 images.', 'post-to-instagram') });\n                return;\n            }\n            setSelected([...selected, id]);\n        }\n    };\n\n    const handleSelect = () => {\n        const selectedImgs = images.filter(img => selected.includes(img.id)).map(img => ({\n            id: img.id,\n            url: img.source_url,\n            alt: img.alt_text,\n            width: img.media_details?.width,\n            height: img.media_details?.height,\n        }));\n        setSelectedImages(selectedImgs);\n        if (onClose) onClose();\n    };\n\n    return (\n        <Modal\n            title={__('Select Images for Instagram', 'post-to-instagram')}\n            onRequestClose={onClose}\n            shouldCloseOnClickOutside={false}\n        >\n            {loading && <Spinner />}\n            {error && <Notice status=\"error\" isDismissible={false}>{error}</Notice>}\n            {notice && (\n                <Notice status={notice.status} isDismissible={true} onRemove={() => setNotice(null)}>\n                    {notice.message}\n                </Notice>\n            )}\n            {!loading && !error && (\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(120px, 1fr))', gap: 16, marginBottom: 24 }}>\n                    {images.map(img => (\n                        <Card\n                            key={img.id}\n                            isSelected={selected.includes(img.id)}\n                            onClick={() => handleToggle(img.id)}\n                            style={{ cursor: 'pointer', border: selected.includes(img.id) ? '2px solid #007cba' : '1px solid #ddd' }}\n                        >\n                            <CardMedia>\n                                <img\n                                    src={img.media_details?.sizes?.thumbnail?.source_url || img.source_url}\n                                    alt={img.alt_text || ''}\n                                    style={{ width: '100%', height: 80, objectFit: 'cover', borderRadius: 4 }}\n                                />\n                            </CardMedia>\n                            <CardBody>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={selected.includes(img.id)}\n                                    readOnly\n                                    style={{ marginRight: 8 }}\n                                />\n                                {img.title?.rendered || __('Image', 'post-to-instagram')}\n                            </CardBody>\n                        </Card>\n                    ))}\n                </div>\n            )}\n            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: 8 }}>\n                <Button isSecondary onClick={onClose}>{__('Cancel', 'post-to-instagram')}</Button>\n                <Button isPrimary onClick={handleSelect} disabled={!selected.length}>\n                    {__('Select', 'post-to-instagram')}\n                </Button>\n            </div>\n        </Modal>\n    );\n};\n\nexport default CustomImageSelectModal; ","import { useRef } from '@wordpress/element';\n\nconst getAspectRatioStyle = (aspectRatio) => ({\n    width: 48,\n    height: 48 / aspectRatio,\n    objectFit: 'cover',\n    borderRadius: 4,\n    border: '1px solid #ccc',\n    cursor: 'pointer',\n    background: '#fff',\n});\n\nconst ReorderableImageList = ({ images, setImages, aspectRatio, onPreview }) => {\n    const dragItem = useRef();\n    const dragOverItem = useRef();\n\n    const handleDragStart = (index) => {\n        dragItem.current = index;\n    };\n    const handleDragEnter = (index) => {\n        dragOverItem.current = index;\n    };\n    const handleDragEnd = () => {\n        const from = dragItem.current;\n        const to = dragOverItem.current;\n        if (from === undefined || to === undefined || from === to) return;\n        const updated = [...images];\n        const [moved] = updated.splice(from, 1);\n        updated.splice(to, 0, moved);\n        setImages(updated);\n        dragItem.current = undefined;\n        dragOverItem.current = undefined;\n    };\n    if (!images.length) return null;\n    return (\n        <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8, marginTop: 8 }}>\n            {images.map((img, i) => (\n                <img\n                    key={img.id}\n                    src={img.url}\n                    alt={img.alt || ''}\n                    style={getAspectRatioStyle(aspectRatio)}\n                    draggable\n                    onDragStart={() => handleDragStart(i)}\n                    onDragEnter={() => handleDragEnter(i)}\n                    onDragEnd={handleDragEnd}\n                    onClick={() => onPreview && onPreview(i)}\n                    title=\"Drag to reorder. Click to preview.\"\n                />\n            ))}\n        </div>\n    );\n};\n\nexport default ReorderableImageList; ","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"notices\"];","import { registerPlugin } from '@wordpress/plugins';\nimport { PluginSidebar, PluginSidebarMoreMenuItem } from '@wordpress/editor'; // Corrected import\nimport { __ } from '@wordpress/i18n';\nimport { PanelBody, Button } from '@wordpress/components';\nimport { Fragment, useState, useEffect, useRef } from '@wordpress/element';\nimport AuthPanel from './components/AuthPanel';\nimport CustomImageSelectModal from './components/CustomImageSelectModal';\nimport ReorderableImageList from './components/ReorderableImageList';\nimport { getPostImageIds } from './utils/getPostImageIds';\nimport { createNotice } from '@wordpress/notices';\n\nconst PTI_ICON = 'instagram'; // Placeholder, can be replaced with a custom SVG icon component\n\nconst PostToInstagramPluginSidebar = () => {\n    // Destructure pti_data passed from PHP\n    const {\n        is_configured: initialIsConfigured,\n        is_authenticated: initialIsAuthenticated,\n        auth_url: initialAuthUrl,\n        i18n,\n        auth_redirect_status,\n        app_id: initialAppId,\n        post_id: postId\n    } = pti_data;\n\n    const [isConfigured, setIsConfigured] = useState(initialIsConfigured);\n    const [isAuthenticated, setIsAuthenticated] = useState(initialIsAuthenticated);\n    const [authUrl, setAuthUrl] = useState(initialAuthUrl);\n    const [isLoading, setIsLoading] = useState(true); // Start with loading true for initial check\n    const [showEdit, setShowEdit] = useState(false);\n    const [savedAppId, setSavedAppId] = useState(initialAppId || '');\n    const [selectedImages, setSelectedImages] = useState([]);\n    const [showImageModal, setShowImageModal] = useState(false);\n    const [previewIndex, setPreviewIndex] = useState(null);\n    const [allowedIds, setAllowedIds] = useState([]);\n    const [caption, setCaption] = useState('');\n    const [posting, setPosting] = useState(false);\n    const [disconnecting, setDisconnecting] = useState(false);\n\n    // Calculate aspect ratio of the first image\n    const aspectRatio = selectedImages.length > 0 && selectedImages[0].url && selectedImages[0].id\n        ? (() => {\n            // Try to get width/height from the media library if available\n            const img = selectedImages[0];\n            if (img.width && img.height) return img.width / img.height;\n            // Fallback: assume square\n            return 1;\n        })()\n        : 1;\n\n    const handlePreview = (index) => setPreviewIndex(index);\n    const closePreview = () => setPreviewIndex(null);\n\n    // Function to check authentication status via REST API\n    const checkAuthStatus = (showAlerts = false) => {\n        setIsLoading(true);\n        wp.apiFetch({\n            path: 'pti/v1/auth/status', // Correct path for wp.apiFetch (namespace/route)\n            method: 'GET',\n        })\n        .then((data) => {\n            setIsConfigured(data.is_configured);\n            setIsAuthenticated(data.is_authenticated);\n            setAuthUrl(data.auth_url || '#');\n            setSavedAppId(data.app_id || '');\n            setIsLoading(false);\n            if (showAlerts && data.is_authenticated) {\n                // For better UX, consider using WordPress notices:\n                // wp.data.dispatch('core/notices').createNotice('success', i18n.auth_successful || 'Authenticated!', { isDismissible: true });\n            }\n        })\n        .catch((error) => {\n            setIsLoading(false);\n            console.error('Error checking auth status:', error);\n            if (showAlerts) {\n                // wp.data.dispatch('core/notices').createNotice('error', i18n.generic_auth_error || 'Error checking status.', { isDismissible: true });\n                alert(i18n.generic_auth_error || 'Error checking authentication status.');\n            }\n        });\n    };\n\n    // Handle messages from OAuth window\n    useEffect(() => {\n        const handleAuthMessage = (event) => {\n            // IMPORTANT: Add origin check for security in a real application\n            // if (event.origin !== window.location.origin) { /* console.warn('Message from untrusted origin'); return; */ }\n            if (event.data && event.data.type === 'pti_auth_complete') {\n                if (event.data.success) {\n                    checkAuthStatus(true); // Re-fetch status from server\n                     if (window.oauthWindow && !window.oauthWindow.closed) {\n                        window.oauthWindow.close();\n                    }\n                } else {\n                    alert(i18n.auth_failed + (event.data.message ? '\\\\n' + event.data.message : ''));\n                }\n            }\n        };\n        window.addEventListener('message', handleAuthMessage);\n        return () => window.removeEventListener('message', handleAuthMessage);\n    }, [i18n]); // i18n might change if site language changes, good to include\n\n    // Effect to handle auth redirect status from URL query params\n    useEffect(() => {\n        if (auth_redirect_status) {\n            if (auth_redirect_status === 'success') {\n                checkAuthStatus(true);\n            } else {\n                let errorMessage = i18n.auth_failed;\n                if (i18n[auth_redirect_status]) {\n                   errorMessage = i18n[auth_redirect_status];\n                } else if (auth_redirect_status !== '1') { // Avoid showing \" (Details: 1)\"\n                   errorMessage += ` (Details: ${auth_redirect_status})`;\n                }\n                alert(errorMessage);\n            }\n            // Clean the URL query parameters\n            if (window.history.replaceState) {\n                const currentUrl = new URL(window.location.href);\n                currentUrl.searchParams.delete('pti_auth_success');\n                currentUrl.searchParams.delete('pti_auth_error');\n                window.history.replaceState({ path: currentUrl.href }, '', currentUrl.href);\n            }\n        }\n    }, [auth_redirect_status, i18n]);\n\n    const handleConnectInstagram = () => {\n        if (!isConfigured) {\n            alert(i18n.not_configured_for_auth || 'App not configured.');\n            return;\n        }\n        if (authUrl && authUrl !== '#') {\n            window.oauthWindow = window.open(authUrl, 'ptiOAuthConnect', 'width=600,height=700');\n            const timer = setInterval(() => {\n                if (window.oauthWindow && window.oauthWindow.closed) {\n                    clearInterval(timer);\n                    console.log('OAuth window closed by user or completed, re-checking auth status.');\n                    checkAuthStatus(true);\n                }\n            }, 1000);\n        } else {\n            alert(i18n.generic_auth_error || 'Authentication URL not available.');\n        }\n    };\n    \n    // Initial status check when component mounts\n    useEffect(() => {\n        checkAuthStatus();\n    }, []); // Empty dependency array ensures this runs only once on mount\n\n    // Handler to open the custom image modal for image selection\n    const openMediaModal = () => {\n        setAllowedIds(getPostImageIds());\n        setShowImageModal(true);\n    };\n\n    // Handler for Post Now\n    const handlePostNow = async () => {\n        if (!selectedImages.length) return;\n        setPosting(true);\n        try {\n            const response = await wp.apiFetch({\n                path: '/pti/v1/post-now',\n                method: 'POST',\n                data: {\n                    post_id: postId,\n                    image_ids: selectedImages.map(img => img.id),\n                    caption,\n                    _wpnonce: pti_data.nonce_post_media, // Localized in PHP\n                },\n            });\n            setPosting(false);\n            if (response && response.success) {\n                setSelectedImages([]);\n                setCaption('');\n                wp.data.dispatch('core/notices').createNotice('success', __('Posted to Instagram successfully!', 'post-to-instagram'), { isDismissible: true });\n            } else {\n                wp.data.dispatch('core/notices').createNotice('error', response && response.message ? response.message : __('Failed to post to Instagram.', 'post-to-instagram'), { isDismissible: true });\n            }\n        } catch (e) {\n            setPosting(false);\n            wp.data.dispatch('core/notices').createNotice('error', __('Error posting to Instagram.', 'post-to-instagram'), { isDismissible: true });\n        }\n    };\n\n    const handleDisconnect = async () => {\n        if (!window.confirm(i18n.disconnect_instagram || 'Disconnect Instagram Account?')) return;\n        setDisconnecting(true);\n        try {\n            const response = await wp.apiFetch({\n                path: '/pti/v1/disconnect',\n                method: 'POST',\n                data: { _wpnonce: pti_data.nonce_disconnect },\n            });\n            setDisconnecting(false);\n            if (response && response.success) {\n                wp.data.dispatch('core/notices').createNotice('success', i18n.disconnected || 'Account disconnected.', { isDismissible: true });\n                checkAuthStatus();\n            } else {\n                wp.data.dispatch('core/notices').createNotice('error', response && response.message ? response.message : (i18n.error_disconnecting || 'Error disconnecting account.'), { isDismissible: true });\n            }\n        } catch (e) {\n            setDisconnecting(false);\n            wp.data.dispatch('core/notices').createNotice('error', i18n.error_disconnecting || 'Error disconnecting account.', { isDismissible: true });\n        }\n    };\n\n    let panelContent;\n\n    if (isLoading) {\n        panelContent = <p>{__('Loading status...', 'post-to-instagram')}</p>;\n    } else if (!isConfigured || showEdit) {\n        panelContent = (\n            <AuthPanel\n                isConfigured={isConfigured}\n                isAuthenticated={isAuthenticated}\n                authUrl={authUrl}\n                i18n={i18n}\n                isLoading={isLoading}\n                onAuthStatusChange={checkAuthStatus}\n                showEdit={showEdit}\n                setShowEdit={setShowEdit}\n                savedAppId={savedAppId}\n            />\n        );\n    } else if (!isAuthenticated) {\n        panelContent = (\n            <Fragment>\n                <p>{__('Connect your Instagram account to start posting.', 'post-to-instagram')}</p>\n                <Button isPrimary onClick={handleConnectInstagram} disabled={isLoading || authUrl === '#'}>\n                    {i18n.connect_instagram || 'Connect to Instagram'}\n                </Button>\n                <Button isSecondary onClick={() => setShowEdit(true)} style={{ marginLeft: 8 }}>\n                    {__('Edit API Credentials', 'post-to-instagram')}\n                </Button>\n            </Fragment>\n        );\n    } else {\n        panelContent = (\n            <Fragment>\n                <p>{__('Ready to post to Instagram!', 'post-to-instagram')}</p>\n                <Button isPrimary onClick={openMediaModal}>\n                    {i18n.select_images || 'Select Images'}\n                </Button>\n                {/* Cropping notice */}\n                <div className=\"pti-cropping-notice\">\n                    {__(\"All images will be cropped to match the aspect ratio of the first image in your selection, per Instagram's requirements.\", 'post-to-instagram')}\n                </div>\n                {/* Drag-and-drop reordering and preview */}\n                <ReorderableImageList\n                    images={selectedImages}\n                    setImages={setSelectedImages}\n                    aspectRatio={aspectRatio}\n                    onPreview={handlePreview}\n                />\n                {/* Caption input, only show if images are selected */}\n                {selectedImages.length > 0 && (\n                    <div className=\"pti-caption-box\">\n                        <label className=\"pti-caption-label\">\n                            {__('Instagram Caption', 'post-to-instagram')}\n                        </label>\n                        <textarea\n                            className=\"pti-caption-input\"\n                            value={caption}\n                            onChange={e => setCaption(e.target.value)}\n                            rows={4}\n                            placeholder={__('Write your Instagram caption here...', 'post-to-instagram')}\n                        />\n                        {/* Post Now / Schedule Post buttons */}\n                        <div className=\"pti-post-actions\">\n                            <Button isPrimary onClick={handlePostNow} disabled={posting}>\n                                {posting ? __('Posting...', 'post-to-instagram') : __('Post Now', 'post-to-instagram')}\n                            </Button>\n                            <Button isSecondary>{__('Schedule Post', 'post-to-instagram')}</Button>\n                        </div>\n                    </div>\n                )}\n                {/* Placeholder for ImagePreviewModal */}\n                {previewIndex !== null && (\n                    <div className=\"pti-preview-placeholder\">\n                        {__('(Image preview modal coming soon)', 'post-to-instagram')}\n                    </div>\n                )}\n                {/* CustomImageSelectModal is rendered conditionally */}\n                {showImageModal && (\n                    <CustomImageSelectModal\n                        allowedIds={allowedIds}\n                        selectedImages={selectedImages}\n                        setSelectedImages={setSelectedImages}\n                        onClose={() => setShowImageModal(false)}\n                        maxSelect={10}\n                    />\n                )}\n            </Fragment>\n        );\n    }\n\n    return (\n        <Fragment>\n            <PluginSidebarMoreMenuItem\n                target=\"post-to-instagram-sidebar\"\n                icon={PTI_ICON}\n            >\n                {i18n.post_to_instagram || 'Post to Instagram'}\n            </PluginSidebarMoreMenuItem>\n            <PluginSidebar\n                name=\"post-to-instagram-sidebar\"\n                title={i18n.post_to_instagram || 'Post to Instagram'}\n                icon={PTI_ICON}\n            >\n                <PanelBody>\n                    {panelContent}\n                </PanelBody>\n                {/* Move Disconnect button to the bottom of the sidebar */}\n                <div className=\"pti-disconnect-bottom\">\n                    <Button isSecondary onClick={handleDisconnect} disabled={disconnecting}>\n                        {disconnecting ? __('Disconnecting...', 'post-to-instagram') : (i18n.disconnect_instagram || 'Disconnect')}\n                    </Button>\n                </div>\n            </PluginSidebar>\n        </Fragment>\n    );\n};\n\nregisterPlugin('post-to-instagram', {\n    render: PostToInstagramPluginSidebar,\n    icon: PTI_ICON,\n}); ","// Returns a unique array of all image IDs in the current post (including nested blocks)\nexport function getPostImageIds() {\n    if (!window.wp || !window.wp.data || !window.wp.data.select) return [];\n    try {\n        const blocks = window.wp.data.select('core/block-editor').getBlocks();\n        let ids = [];\n        const walkBlocks = (blockList) => {\n            blockList.forEach(block => {\n                if (block.name === 'core/image' && block.attributes && block.attributes.id) {\n                    ids.push(Number(block.attributes.id));\n                }\n                if (block.innerBlocks && block.innerBlocks.length) {\n                    walkBlocks(block.innerBlocks);\n                }\n            });\n        };\n        walkBlocks(blocks);\n        return Array.from(new Set(ids));\n    } catch (e) {\n        return [];\n    }\n} "],"names":["window","AuthPanel","isConfigured","isAuthenticated","authUrl","i18n","isLoading","onAuthStatusChange","showEdit","setShowEdit","savedAppId","appId","setAppId","useState","appSecret","setAppSecret","notice","setNotice","saving","setSaving","loadingAppId","setLoadingAppId","useEffect","wp","apiFetch","path","method","then","data","app_id","_jsxs","onSubmit","e","preventDefault","app_secret","response","success","status","message","creds_saved","error_saving_creds","catch","error","children","_jsx","not_configured_for_auth","TextControl","label","app_id_label","value","onChange","disabled","__next40pxDefaultSize","__nextHasNoMarginBottom","app_secret_label","type","style","fontSize","color","marginTop","__","Button","isPrimary","save_credentials","isSecondary","onClick","marginLeft","Notice","isDismissible","onRemove","CustomImageSelectModal","allowedIds","selectedImages","setSelectedImages","onClose","maxSelect","images","setImages","loading","setLoading","setError","selected","setSelected","map","img","id","async","ids","length","params","join","resp","fetch","ok","json","fetchImagesByIds","Modal","title","onRequestClose","shouldCloseOnClickOutside","Spinner","display","gridTemplateColumns","gap","marginBottom","Card","isSelected","includes","filter","sid","handleToggle","cursor","border","CardMedia","src","media_details","sizes","thumbnail","source_url","alt","alt_text","width","height","objectFit","borderRadius","CardBody","checked","readOnly","marginRight","rendered","justifyContent","handleSelect","selectedImgs","url","getAspectRatioStyle","aspectRatio","background","ReorderableImageList","onPreview","dragItem","useRef","dragOverItem","handleDragEnd","from","current","to","undefined","updated","moved","splice","flexWrap","i","draggable","onDragStart","handleDragStart","index","onDragEnter","handleDragEnter","onDragEnd","PTI_ICON","registerPlugin","render","PostToInstagramPluginSidebar","is_configured","initialIsConfigured","is_authenticated","initialIsAuthenticated","auth_url","initialAuthUrl","auth_redirect_status","initialAppId","post_id","postId","pti_data","setIsConfigured","setIsAuthenticated","setAuthUrl","setIsLoading","setSavedAppId","showImageModal","setShowImageModal","previewIndex","setPreviewIndex","setAllowedIds","caption","setCaption","posting","setPosting","disconnecting","setDisconnecting","checkAuthStatus","showAlerts","console","alert","generic_auth_error","handleAuthMessage","event","oauthWindow","closed","close","auth_failed","addEventListener","removeEventListener","errorMessage","history","replaceState","currentUrl","URL","location","href","searchParams","delete","panelContent","Fragment","openMediaModal","select","blocks","getBlocks","walkBlocks","blockList","forEach","block","name","attributes","push","Number","innerBlocks","Array","Set","getPostImageIds","select_images","className","target","rows","placeholder","image_ids","_wpnonce","nonce_post_media","dispatch","createNotice","handleConnectInstagram","open","timer","setInterval","clearInterval","log","connect_instagram","PluginSidebarMoreMenuItem","icon","post_to_instagram","PluginSidebar","PanelBody","confirm","disconnect_instagram","nonce_disconnect","disconnected","error_disconnecting"],"sourceRoot":""}